%% System Configuration for Tolkflip Backend
[
    {sasl, [
        {sasl_error_logger, false}
    ]},

    {lager, [
        {log_root, "/var/log/tolkflip"},
        {handlers, [
            {lager_console_backend, [
                {level, info},
                {formatter, lager_default_formatter},
                {formatter_config, [
                    time, " [", severity, "] ",
                    {pid, ""},
                    " ", message, "\n"
                ]}
            ]},
            {lager_file_backend, [
                {file, "error.log"},
                {level, error},
                {size, 10485760},
                {date, "$D0"},
                {count, 5}
            ]},
            {lager_file_backend, [
                {file, "console.log"},
                {level, info},
                {size, 10485760},
                {date, "$D0"},
                {count, 5}
            ]}
        ]},
        {error_logger_redirect, true},
        {error_logger_hwm, 100}
    ]},

    {tolkflip_shared, [
        {cassandra, [
            {contact_points, ["127.0.0.1"]},
            {port, 9042},
            {keyspace, "tolkflip"},
            {pool_size, 10}
        ]},
        {redis, [
            {host, "127.0.0.1"},
            {port, 6379},
            {pool_size, 20}
        ]},
        {jwt, [
            {secret, "your-jwt-secret-change-in-production"},
            {access_token_expiry, 3600},        % 1 hour
            {refresh_token_expiry, 2592000}     % 30 days
        ]}
    ]},

    {auth_service, [
        {port, 3001},
        {num_acceptors, 100}
    ]},

    {user_service, [
        {port, 3002},
        {num_acceptors, 100}
    ]},

    {chat_service, [
        {port, 3003},
        {num_acceptors, 200},              % More acceptors for WebSocket
        {max_connections, 1000000}         % 1M concurrent connections
    ]},

    {translation_service, [
        {port, 3004},
        {num_acceptors, 100}
    ]},

    {transcription_service, [
        {port, 3005},
        {num_acceptors, 100}
    ]},

    {media_service, [
        {port, 3006},
        {num_acceptors, 100}
    ]},

    {presence_service, [
        {port, 3007},
        {num_acceptors, 100}
    ]},

    {message_store_service, [
        {port, 3008},
        {num_acceptors, 100}
    ]},

    {notification_service, [
        {port, 3009},
        {num_acceptors, 100}
    ]},

    {webrtc_service, [
        {port, 3010},
        {num_acceptors, 200}
    ]},

    {group_service, [
        {port, 3011},
        {num_acceptors, 100}
    ]},

    {api_gateway, [
        {port, 3000},
        {num_acceptors, 200}
    ]}
].
